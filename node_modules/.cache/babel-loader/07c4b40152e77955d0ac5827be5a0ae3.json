{"ast":null,"code":"import _slicedToArray from \"/home/rasoolhp/Desktop/profile-job/Profile-Jobs-Front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/rasoolhp/Desktop/profile-job/Profile-Jobs-Front/src/pages/RegisterPage/RegisterPage.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Footer } from 'components';\nimport { Card, Button } from 'antd';\nimport './RegisterPage.scss';\nimport { Formik } from 'formik';\nimport { Input } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport { registerRequest } from 'store/actions/registerActions';\nimport { useHistory } from 'react-router';\nimport { LOGIN_SUCCESS, LOGIN_ERROR } from 'store/actionTypes';\nimport { isAuth } from 'configs/isAuth';\nimport api from 'Api/api';\nconst RegisterSchemaValid = Yup.object().shape({\n  name: Yup.string().trim().min(2, 'نام بیشتر از ۲ کاراکتر باشد').max(20, 'نام کمتر از ۲۰ کاراکتر باشد').required('لطفا نام خود را وارد کنید'),\n  family: Yup.string().trim().min(3, 'نام خانوادگی بیشتر از ۳ کاراکتر باشد').max(30, 'نام خانوادگی کمتر از ۳۰ کاراکتر باشد').required('لطفا نام خانوادگی خود را وارد کنید'),\n  password: Yup.string().trim().required('لطفا رمز عبور خود را وارد کنید').trim('لطفا رمز عبور خود را وارد کنید'),\n  email: Yup.string().trim().email('ایمیل نامعتبر').required('لطفا ایمیل خود را وارد کنید'),\n  companyName: Yup.string().trim().required('لطفا نام شرکت خود را وارد کنید') // file: Yup.mixed().required('لطفا فایل مدنظر خود را اضافه کنید'),\n\n});\nexport const RegisterPage = () => {\n  let history = useHistory();\n  const loadingState = useSelector(state => state.login.status);\n  const dispatch = useDispatch();\n\n  const _useState = useState(undefined),\n        _useState2 = _slicedToArray(_useState, 2),\n        logo = _useState2[0],\n        setLogo = _useState2[1];\n\n  useEffect(() => {\n    console.log('loadingState', loadingState);\n\n    if (loadingState === LOGIN_SUCCESS) {\n      uploadLogo(logo);\n    }\n  }, [loadingState]);\n\n  function isAuthHere() {\n    return isAuth() ? history.push('./dashboard') : false;\n  }\n\n  function uploadLogo(file) {\n    console.log(typeof file);\n    const formData = new FormData();\n    formData.append('file', file);\n    console.log('form data', formData);\n    const headerConfig = {\n      headers: {\n        'content-type': 'multipart/form-data',\n        Authorization: 'hmac ' + localStorage.getItem('accessToken')\n      }\n    };\n    api.post('company/logo', formData, headerConfig).then(response => {\n      console.log('response', response); // history.push('/dashboard');\n    }).catch(error => {\n      console.log('error', error);\n    });\n  }\n\n  return React.createElement(\"div\", {\n    className: \"register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, isAuthHere(), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"register__card\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Card, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"register__title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"\\u062A\\u06A9\\u0645\\u06CC\\u0644 \\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A \\u0641\\u0631\\u062F\\u06CC\"), React.createElement(Formik, {\n    initialValues: {\n      name: '',\n      family: '',\n      password: '',\n      email: '',\n      companyName: '',\n      file: undefined\n    },\n    validationSchema: RegisterSchemaValid,\n    onSubmit: (values, {\n      setSubmitting\n    }) => {\n      setSubmitting(true);\n      dispatch(registerRequest(values.email.trim(), values.password.trim(), values.name.trim() + ' ' + values.family.trim(), values.companyName.trim()));\n      console.log('Values.file', typeof values.file);\n      setLogo(values.file);\n\n      if (loadingState !== LOGIN_ERROR || loadingState === LOGIN_ERROR) {\n        setSubmitting(false);\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, props => {\n    const values = props.values,\n          touched = props.touched,\n          errors = props.errors,\n          isSubmitting = props.isSubmitting,\n          handleChange = props.handleChange,\n          handleBlur = props.handleBlur,\n          handleSubmit = props.handleSubmit;\n    return React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"register__input__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"\\u0646\\u0627\\u0645 \\u0648\\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC\"), React.createElement(\"div\", {\n      className: \"register__nameAndFamily\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(Input, {\n      className: errors.name && touched.name ? 'register__input--error' : '',\n      id: \"name\",\n      placeholder: \"\\u0646\\u0627\\u0645\",\n      type: \"text\",\n      value: values.name,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(Input, {\n      className: errors.family && touched.family ? 'register__input--error' : '',\n      id: \"family\",\n      placeholder: \"\\u0646\\u0627\\u0645 \\u062E\\u0627\\u0646\\u0648\\u0627\\u062F\\u06AF\\u06CC\",\n      type: \"text\",\n      value: values.family,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })), errors.name && touched.name && React.createElement(\"p\", {\n      className: \"register__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, errors.name) || errors.family && touched.family && React.createElement(\"p\", {\n      className: \"register__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, errors.family), React.createElement(\"span\", {\n      className: \"login__input__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"\\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\"), React.createElement(Input, {\n      className: errors.password && touched.password ? 'register__input--error' : '',\n      id: \"password\",\n      placeholder: \"\\u0631\\u0645\\u0632 \\u0639\\u0628\\u0648\\u0631\",\n      type: \"password\",\n      value: values.password,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), errors.password && touched.password && React.createElement(\"p\", {\n      className: \"register__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, errors.password), React.createElement(\"span\", {\n      className: \"register__input__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"\\u0627\\u06CC\\u0645\\u06CC\\u0644\"), React.createElement(Input, {\n      className: errors.email && touched.email ? 'register__input--error' : '',\n      id: \"email\",\n      placeholder: \"\\u0627\\u06CC\\u0645\\u06CC\\u0644\",\n      type: \"email\",\n      value: values.email,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), errors.email && touched.email && React.createElement(\"p\", {\n      className: \"register__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, errors.email), React.createElement(\"span\", {\n      className: \"register__input__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"\\u0646\\u0627\\u0645 \\u0634\\u0631\\u06A9\\u062A\"), React.createElement(Input, {\n      className: errors.companyName && touched.companyName ? 'register__input--error' : '',\n      id: \"companyName\",\n      placeholder: \"\\u0646\\u0627\\u0645 \\u0634\\u0631\\u06A9\\u062A\",\n      type: \"text\",\n      value: values.companyName,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }), errors.companyName && touched.companyName && React.createElement(\"p\", {\n      className: \"register__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, errors.companyName), React.createElement(\"span\", {\n      className: \"register__input__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"\\u0628\\u0627\\u0631\\u06AF\\u0630\\u0627\\u0631\\u06CC \\u0644\\u0648\\u06AF\\u0648 \\u0634\\u0631\\u06A9\\u062A\"), React.createElement(\"div\", {\n      className: \"applyResume__input__file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"applyResume__input__file__button\",\n      htmlFor: \"file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, values.file ? values.file.slice(values.file.lastIndexOf('\\\\') + 1, values.file.length < 25 ? values.file.length : values.file.lastIndexOf('\\\\') + 25) : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \" \\u0628\\u0627\\u0631\\u06AF\\u0630\\u0627\\u0631\\u06CC \")), React.createElement(\"input\", {\n      style: {\n        zIndex: -1,\n        opacity: 0\n      },\n      className: \"applyResume__inputFilediv__input\",\n      type: \"file\",\n      accept: \".jpeg, .jpg , .png\",\n      capture: true,\n      id: \"file\",\n      value: values.file,\n      onChange: handleChange,\n      onBlur: handleBlur,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    })), errors.file && touched.file && React.createElement(\"p\", {\n      className: \"applyResume__input--textError\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, errors.file), React.createElement(\"p\", {\n      className: \"register__accept\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"\\u0628\\u0627 \\u062B\\u0628\\u062A \\u0646\\u0627\\u0645 \\u062F\\u0631 \\u067E\\u0631\\u0648\\u0641\\u0627\\u06CC\\u0644 \\u0634\\u0645\\u0627 \\u0628\\u0627 \", React.createElement(\"a\", {\n      href: \"# \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, \"\\u062D\\u0631\\u06CC\\u0645 \\u062E\\u0635\\u0648\\u0635\\u06CC\"), \" \\u0648\", ' ', React.createElement(\"a\", {\n      href: \"# \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"\\u0634\\u0631\\u0627\\u06CC\\u0637 \\u0648 \\u0642\\u0648\\u0627\\u0646\\u06CC\\u0646\"), \" \\u0627\\u0633\\u062A\\u0641\\u0627\\u062F\\u0647 \\u0627\\u0632 \\u0633\\u0631\\u0648\\u06CC\\u0633 \\u0647\\u0627\\u06CC \\u0633\\u0627\\u06CC\\u062A \\u067E\\u0631\\u0648\\u0641\\u0627\\u06CC\\u0644 \\u0645\\u0648\\u0627\\u0641\\u0642\\u062A \\u0645\\u06CC\\u06A9\\u0646\\u06CC\\u062F.\"), React.createElement(Button, {\n      htmlType: \"submit\",\n      className: \"register__button\",\n      type: \"primary\",\n      disabled: isSubmitting,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"\\u0627\\u062F\\u0627\\u0645\\u0647\"));\n  }))), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269\n    },\n    __self: this\n  })));\n};","map":{"version":3,"sources":["/home/rasoolhp/Desktop/profile-job/Profile-Jobs-Front/src/pages/RegisterPage/RegisterPage.tsx"],"names":["React","useEffect","useState","Footer","Card","Button","Formik","Input","useDispatch","useSelector","Yup","registerRequest","useHistory","LOGIN_SUCCESS","LOGIN_ERROR","isAuth","api","RegisterSchemaValid","object","shape","name","string","trim","min","max","required","family","password","email","companyName","RegisterPage","history","loadingState","state","login","status","dispatch","undefined","logo","setLogo","console","log","uploadLogo","isAuthHere","push","file","formData","FormData","append","headerConfig","headers","Authorization","localStorage","getItem","post","then","response","catch","error","values","setSubmitting","props","touched","errors","isSubmitting","handleChange","handleBlur","handleSubmit","slice","lastIndexOf","length","zIndex","opacity"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,MAAT,QAAuB,YAAvB;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,MAA7B;AACA,OAAO,qBAAP;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,SAASC,KAAT,QAAsB,MAAtB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,SAASC,eAAT,QAAgC,+BAAhC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,aAAT,EAAwBC,WAAxB,QAA2C,mBAA3C;AACA,SAASC,MAAT,QAAuB,gBAAvB;AACA,OAAOC,GAAP,MAAgB,SAAhB;AAEA,MAAMC,mBAAmB,GAAGP,GAAG,CAACQ,MAAJ,GAAaC,KAAb,CAAmB;AAC7CC,EAAAA,IAAI,EAAEV,GAAG,CAACW,MAAJ,GACHC,IADG,GAEHC,GAFG,CAEC,CAFD,EAEI,6BAFJ,EAGHC,GAHG,CAGC,EAHD,EAGK,6BAHL,EAIHC,QAJG,CAIM,2BAJN,CADuC;AAM7CC,EAAAA,MAAM,EAAEhB,GAAG,CAACW,MAAJ,GACLC,IADK,GAELC,GAFK,CAED,CAFC,EAEE,sCAFF,EAGLC,GAHK,CAGD,EAHC,EAGG,sCAHH,EAILC,QAJK,CAII,oCAJJ,CANqC;AAW7CE,EAAAA,QAAQ,EAAEjB,GAAG,CAACW,MAAJ,GACPC,IADO,GAEPG,QAFO,CAEE,gCAFF,EAGPH,IAHO,CAGF,gCAHE,CAXmC;AAe7CM,EAAAA,KAAK,EAAElB,GAAG,CAACW,MAAJ,GACJC,IADI,GAEJM,KAFI,CAEE,eAFF,EAGJH,QAHI,CAGK,6BAHL,CAfsC;AAmB7CI,EAAAA,WAAW,EAAEnB,GAAG,CAACW,MAAJ,GACVC,IADU,GAEVG,QAFU,CAED,gCAFC,CAnBgC,CAsB7C;;AAtB6C,CAAnB,CAA5B;AAyBA,OAAO,MAAMK,YAAsB,GAAG,MAAM;AAC1C,MAAIC,OAAO,GAAGnB,UAAU,EAAxB;AACA,QAAMoB,YAAY,GAAGvB,WAAW,CAAEwB,KAAD,IAAgBA,KAAK,CAACC,KAAN,CAAYC,MAA7B,CAAhC;AACA,QAAMC,QAAQ,GAAG5B,WAAW,EAA5B;;AAH0C,oBAKlBN,QAAQ,CAACmC,SAAD,CALU;AAAA;AAAA,QAKnCC,IALmC;AAAA,QAK7BC,OAL6B;;AAO1CtC,EAAAA,SAAS,CAAC,MAAM;AACduC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BT,YAA5B;;AACA,QAAIA,YAAY,KAAKnB,aAArB,EAAoC;AAClC6B,MAAAA,UAAU,CAACJ,IAAD,CAAV;AACD;AACF,GALQ,EAKN,CAACN,YAAD,CALM,CAAT;;AAOA,WAASW,UAAT,GAAsB;AACpB,WAAO5B,MAAM,KAAKgB,OAAO,CAACa,IAAR,CAAa,aAAb,CAAL,GAAmC,KAAhD;AACD;;AAED,WAASF,UAAT,CAAoBG,IAApB,EAA+B;AAC7BL,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAOI,IAAnB;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBH,IAAxB;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBK,QAAzB;AACA,UAAMG,YAAY,GAAG;AACnBC,MAAAA,OAAO,EAAE;AACP,wBAAgB,qBADT;AAEPC,QAAAA,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAb,CAAqB,aAArB;AAFlB;AADU,KAArB;AAMArC,IAAAA,GAAG,CACAsC,IADH,CACQ,cADR,EACwBR,QADxB,EACkCG,YADlC,EAEGM,IAFH,CAESC,QAAD,IAAmB;AACvBhB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBe,QAAxB,EADuB,CAEvB;AACD,KALH,EAMGC,KANH,CAMSC,KAAK,IAAI;AACdlB,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBiB,KAArB;AACD,KARH;AASD;;AAED,SACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGf,UAAU,EADb,EAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAG,IAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0GADF,EAEE,oBAAC,MAAD;AACE,IAAA,aAAa,EAAE;AACbvB,MAAAA,IAAI,EAAE,EADO;AAEbM,MAAAA,MAAM,EAAE,EAFK;AAGbC,MAAAA,QAAQ,EAAE,EAHG;AAIbC,MAAAA,KAAK,EAAE,EAJM;AAKbC,MAAAA,WAAW,EAAE,EALA;AAMbgB,MAAAA,IAAI,EAAER;AANO,KADjB;AASE,IAAA,gBAAgB,EAAEpB,mBATpB;AAUE,IAAA,QAAQ,EAAE,CAAC0C,MAAD,EAAS;AAAEC,MAAAA;AAAF,KAAT,KAA+B;AACvCA,MAAAA,aAAa,CAAC,IAAD,CAAb;AACAxB,MAAAA,QAAQ,CACNzB,eAAe,CACbgD,MAAM,CAAC/B,KAAP,CAAaN,IAAb,EADa,EAEbqC,MAAM,CAAChC,QAAP,CAAgBL,IAAhB,EAFa,EAGbqC,MAAM,CAACvC,IAAP,CAAYE,IAAZ,KAAqB,GAArB,GAA2BqC,MAAM,CAACjC,MAAP,CAAcJ,IAAd,EAHd,EAIbqC,MAAM,CAAC9B,WAAP,CAAmBP,IAAnB,EAJa,CADT,CAAR;AAQAkB,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2B,OAAOkB,MAAM,CAACd,IAAzC;AACAN,MAAAA,OAAO,CAACoB,MAAM,CAACd,IAAR,CAAP;;AACA,UACEb,YAAY,KAAKlB,WAAjB,IACAkB,YAAY,KAAKlB,WAFnB,EAGE;AACA8C,QAAAA,aAAa,CAAC,KAAD,CAAb;AACD;AACF,KA5BH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA6BGC,KAAK,IAAI;AAAA,UAENF,MAFM,GASJE,KATI,CAENF,MAFM;AAAA,UAGNG,OAHM,GASJD,KATI,CAGNC,OAHM;AAAA,UAINC,MAJM,GASJF,KATI,CAINE,MAJM;AAAA,UAKNC,YALM,GASJH,KATI,CAKNG,YALM;AAAA,UAMNC,YANM,GASJJ,KATI,CAMNI,YANM;AAAA,UAONC,UAPM,GASJL,KATI,CAONK,UAPM;AAAA,UAQNC,YARM,GASJN,KATI,CAQNM,YARM;AAUR,WACE;AAAM,MAAA,QAAQ,EAAEA,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sGADF,EAIE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,KAAD;AACE,MAAA,SAAS,EACPJ,MAAM,CAAC3C,IAAP,IAAe0C,OAAO,CAAC1C,IAAvB,GACI,wBADJ,GAEI,EAJR;AAME,MAAA,EAAE,EAAC,MANL;AAOE,MAAA,WAAW,EAAC,oBAPd;AAQE,MAAA,IAAI,EAAC,MARP;AASE,MAAA,KAAK,EAAEuC,MAAM,CAACvC,IAThB;AAUE,MAAA,QAAQ,EAAE6C,YAVZ;AAWE,MAAA,MAAM,EAAEC,UAXV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAcE,oBAAC,KAAD;AACE,MAAA,SAAS,EACPH,MAAM,CAACrC,MAAP,IAAiBoC,OAAO,CAACpC,MAAzB,GACI,wBADJ,GAEI,EAJR;AAME,MAAA,EAAE,EAAC,QANL;AAOE,MAAA,WAAW,EAAC,qEAPd;AAQE,MAAA,IAAI,EAAC,MARP;AASE,MAAA,KAAK,EAAEiC,MAAM,CAACjC,MAThB;AAUE,MAAA,QAAQ,EAAEuC,YAVZ;AAWE,MAAA,MAAM,EAAEC,UAXV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdF,CAJF,EAgCIH,MAAM,CAAC3C,IAAP,IAAe0C,OAAO,CAAC1C,IAAvB,IACA;AAAG,MAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgC2C,MAAM,CAAC3C,IAAvC,CADD,IAGE2C,MAAM,CAACrC,MAAP,IAAiBoC,OAAO,CAACpC,MAAzB,IACC;AAAG,MAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgCqC,MAAM,CAACrC,MAAvC,CApCN,EAsCE;AAAM,MAAA,SAAS,EAAC,qBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAtCF,EAuCE,oBAAC,KAAD;AACE,MAAA,SAAS,EACPqC,MAAM,CAACpC,QAAP,IAAmBmC,OAAO,CAACnC,QAA3B,GACI,wBADJ,GAEI,EAJR;AAME,MAAA,EAAE,EAAC,UANL;AAOE,MAAA,WAAW,EAAC,6CAPd;AAQE,MAAA,IAAI,EAAC,UARP;AASE,MAAA,KAAK,EAAEgC,MAAM,CAAChC,QAThB;AAUE,MAAA,QAAQ,EAAEsC,YAVZ;AAWE,MAAA,MAAM,EAAEC,UAXV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAvCF,EAoDGH,MAAM,CAACpC,QAAP,IAAmBmC,OAAO,CAACnC,QAA3B,IACC;AAAG,MAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgCoC,MAAM,CAACpC,QAAvC,CArDJ,EAuDE;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAvDF,EAwDE,oBAAC,KAAD;AACE,MAAA,SAAS,EACPoC,MAAM,CAACnC,KAAP,IAAgBkC,OAAO,CAAClC,KAAxB,GACI,wBADJ,GAEI,EAJR;AAME,MAAA,EAAE,EAAC,OANL;AAOE,MAAA,WAAW,EAAC,gCAPd;AAQE,MAAA,IAAI,EAAC,OARP;AASE,MAAA,KAAK,EAAE+B,MAAM,CAAC/B,KAThB;AAUE,MAAA,QAAQ,EAAEqC,YAVZ;AAWE,MAAA,MAAM,EAAEC,UAXV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxDF,EAqEGH,MAAM,CAACnC,KAAP,IAAgBkC,OAAO,CAAClC,KAAxB,IACC;AAAG,MAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgCmC,MAAM,CAACnC,KAAvC,CAtEJ,EAwEE;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAxEF,EAyEE,oBAAC,KAAD;AACE,MAAA,SAAS,EACPmC,MAAM,CAAClC,WAAP,IAAsBiC,OAAO,CAACjC,WAA9B,GACI,wBADJ,GAEI,EAJR;AAME,MAAA,EAAE,EAAC,aANL;AAOE,MAAA,WAAW,EAAC,6CAPd;AAQE,MAAA,IAAI,EAAC,MARP;AASE,MAAA,KAAK,EAAE8B,MAAM,CAAC9B,WAThB;AAUE,MAAA,QAAQ,EAAEoC,YAVZ;AAWE,MAAA,MAAM,EAAEC,UAXV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzEF,EAsFGH,MAAM,CAAClC,WAAP,IAAsBiC,OAAO,CAACjC,WAA9B,IACC;AAAG,MAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAgCkC,MAAM,CAAClC,WAAvC,CAvFJ,EAyFE;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4GAzFF,EA4FE;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,SAAS,EAAC,kCADZ;AAEE,MAAA,OAAO,EAAC,MAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGG8B,MAAM,CAACd,IAAP,GACEc,MAAM,CAACd,IAAR,CAAwBuB,KAAxB,CACGT,MAAM,CAACd,IAAR,CAAwBwB,WAAxB,CAAoC,IAApC,IAA4C,CAD9C,EAEGV,MAAM,CAACd,IAAR,CAAwByB,MAAxB,GAAiC,EAAjC,GACKX,MAAM,CAACd,IAAR,CAAwByB,MAD5B,GAEKX,MAAM,CAACd,IAAR,CAAwBwB,WAAxB,CAAoC,IAApC,IAA4C,EAJlD,CADD,GAQC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4DAXJ,CADF,EAeE;AACE,MAAA,KAAK,EAAE;AAAEE,QAAAA,MAAM,EAAE,CAAC,CAAX;AAAcC,QAAAA,OAAO,EAAE;AAAvB,OADT;AAEE,MAAA,SAAS,EAAC,kCAFZ;AAGE,MAAA,IAAI,EAAC,MAHP;AAIE,MAAA,MAAM,EAAC,oBAJT;AAKE,MAAA,OAAO,MALT;AAME,MAAA,EAAE,EAAC,MANL;AAOE,MAAA,KAAK,EAAEb,MAAM,CAACd,IAPhB;AAQE,MAAA,QAAQ,EAAEoB,YARZ;AASE,MAAA,MAAM,EAAEC,UATV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAfF,CA5FF,EAuHGH,MAAM,CAAClB,IAAP,IAAeiB,OAAO,CAACjB,IAAvB,IACC;AAAG,MAAA,SAAS,EAAC,+BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGkB,MAAM,CAAClB,IADV,CAxHJ,EA4HE;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sJAC+B;AAAG,MAAA,IAAI,EAAC,IAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iEAD/B,aAC6D,GAD7D,EAEE;AAAG,MAAA,IAAI,EAAC,IAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oFAFF,8PA5HF,EAiIE,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAC,QADX;AAEE,MAAA,SAAS,EAAC,kBAFZ;AAGE,MAAA,IAAI,EAAC,SAHP;AAIE,MAAA,QAAQ,EAAEmB,YAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAjIF,CADF;AA2ID,GAlLH,CAFF,CADF,CADF,EA0LE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA1LF,CAFF,CADF;AAiMD,CAzOM","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Footer } from 'components';\nimport { Card, Button } from 'antd';\nimport './RegisterPage.scss';\nimport { Formik } from 'formik';\nimport { Input } from 'antd';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as Yup from 'yup';\nimport { registerRequest } from 'store/actions/registerActions';\nimport { useHistory } from 'react-router';\nimport { LOGIN_SUCCESS, LOGIN_ERROR } from 'store/actionTypes';\nimport { isAuth } from 'configs/isAuth';\nimport api from 'Api/api';\n\nconst RegisterSchemaValid = Yup.object().shape({\n  name: Yup.string()\n    .trim()\n    .min(2, 'نام بیشتر از ۲ کاراکتر باشد')\n    .max(20, 'نام کمتر از ۲۰ کاراکتر باشد')\n    .required('لطفا نام خود را وارد کنید'),\n  family: Yup.string()\n    .trim()\n    .min(3, 'نام خانوادگی بیشتر از ۳ کاراکتر باشد')\n    .max(30, 'نام خانوادگی کمتر از ۳۰ کاراکتر باشد')\n    .required('لطفا نام خانوادگی خود را وارد کنید'),\n  password: Yup.string()\n    .trim()\n    .required('لطفا رمز عبور خود را وارد کنید')\n    .trim('لطفا رمز عبور خود را وارد کنید'),\n  email: Yup.string()\n    .trim()\n    .email('ایمیل نامعتبر')\n    .required('لطفا ایمیل خود را وارد کنید'),\n  companyName: Yup.string()\n    .trim()\n    .required('لطفا نام شرکت خود را وارد کنید'),\n  // file: Yup.mixed().required('لطفا فایل مدنظر خود را اضافه کنید'),\n});\n\nexport const RegisterPage: React.FC = () => {\n  let history = useHistory();\n  const loadingState = useSelector((state: any) => state.login.status);\n  const dispatch = useDispatch();\n\n  const [logo, setLogo] = useState(undefined);\n\n  useEffect(() => {\n    console.log('loadingState', loadingState);\n    if (loadingState === LOGIN_SUCCESS) {\n      uploadLogo(logo);\n    }\n  }, [loadingState]);\n\n  function isAuthHere() {\n    return isAuth() ? history.push('./dashboard') : false;\n  }\n\n  function uploadLogo(file: any) {\n    console.log(typeof file);\n    const formData = new FormData();\n    formData.append('file', file);\n    console.log('form data', formData);\n    const headerConfig = {\n      headers: {\n        'content-type': 'multipart/form-data',\n        Authorization: 'hmac ' + localStorage.getItem('accessToken'),\n      },\n    };\n    api\n      .post('company/logo', formData, headerConfig)\n      .then((response: any) => {\n        console.log('response', response);\n        // history.push('/dashboard');\n      })\n      .catch(error => {\n        console.log('error', error);\n      });\n  }\n\n  return (\n    <div className='register'>\n      {isAuthHere()}\n      <div className='container'>\n        <div className='register__card'>\n          <Card>\n            <p className='register__title'>تکمیل اطلاعات فردی</p>\n            <Formik\n              initialValues={{\n                name: '',\n                family: '',\n                password: '',\n                email: '',\n                companyName: '',\n                file: undefined!,\n              }}\n              validationSchema={RegisterSchemaValid}\n              onSubmit={(values, { setSubmitting }) => {\n                setSubmitting(true);\n                dispatch(\n                  registerRequest(\n                    values.email.trim(),\n                    values.password.trim(),\n                    values.name.trim() + ' ' + values.family.trim(),\n                    values.companyName.trim(),\n                  ),\n                );\n                console.log('Values.file', typeof values.file);\n                setLogo(values.file);\n                if (\n                  loadingState !== LOGIN_ERROR ||\n                  loadingState === LOGIN_ERROR\n                ) {\n                  setSubmitting(false);\n                }\n              }}>\n              {props => {\n                const {\n                  values,\n                  touched,\n                  errors,\n                  isSubmitting,\n                  handleChange,\n                  handleBlur,\n                  handleSubmit,\n                } = props;\n                return (\n                  <form onSubmit={handleSubmit}>\n                    <span className='register__input__label'>\n                      نام ونام خانوادگی\n                    </span>\n                    <div className='register__nameAndFamily'>\n                      <Input\n                        className={\n                          errors.name && touched.name\n                            ? 'register__input--error'\n                            : ''\n                        }\n                        id='name'\n                        placeholder='نام'\n                        type='text'\n                        value={values.name}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                      />\n                      <Input\n                        className={\n                          errors.family && touched.family\n                            ? 'register__input--error'\n                            : ''\n                        }\n                        id='family'\n                        placeholder='نام خانوادگی'\n                        type='text'\n                        value={values.family}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                      />\n                    </div>\n                    {(errors.name && touched.name && (\n                      <p className='register__error'>{errors.name}</p>\n                    )) ||\n                      (errors.family && touched.family && (\n                        <p className='register__error'>{errors.family}</p>\n                      ))}\n                    <span className='login__input__label'>رمز عبور</span>\n                    <Input\n                      className={\n                        errors.password && touched.password\n                          ? 'register__input--error'\n                          : ''\n                      }\n                      id='password'\n                      placeholder='رمز عبور'\n                      type='password'\n                      value={values.password}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                    />\n                    {errors.password && touched.password && (\n                      <p className='register__error'>{errors.password}</p>\n                    )}\n                    <span className='register__input__label'>ایمیل</span>\n                    <Input\n                      className={\n                        errors.email && touched.email\n                          ? 'register__input--error'\n                          : ''\n                      }\n                      id='email'\n                      placeholder='ایمیل'\n                      type='email'\n                      value={values.email}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                    />\n                    {errors.email && touched.email && (\n                      <p className='register__error'>{errors.email}</p>\n                    )}\n                    <span className='register__input__label'>نام شرکت</span>\n                    <Input\n                      className={\n                        errors.companyName && touched.companyName\n                          ? 'register__input--error'\n                          : ''\n                      }\n                      id='companyName'\n                      placeholder='نام شرکت'\n                      type='text'\n                      value={values.companyName}\n                      onChange={handleChange}\n                      onBlur={handleBlur}\n                    />\n                    {errors.companyName && touched.companyName && (\n                      <p className='register__error'>{errors.companyName}</p>\n                    )}\n                    <span className='register__input__label'>\n                      بارگذاری لوگو شرکت\n                    </span>\n                    <div className='applyResume__input__file'>\n                      <label\n                        className='applyResume__input__file__button'\n                        htmlFor='file'>\n                        {values.file ? (\n                          (values.file as string).slice(\n                            (values.file as string).lastIndexOf('\\\\') + 1,\n                            (values.file as string).length < 25\n                              ? (values.file as string).length\n                              : (values.file as string).lastIndexOf('\\\\') + 25,\n                          )\n                        ) : (\n                          <span> بارگذاری </span>\n                        )}\n                      </label>\n                      <input\n                        style={{ zIndex: -1, opacity: 0 }}\n                        className='applyResume__inputFilediv__input'\n                        type='file'\n                        accept='.jpeg, .jpg , .png'\n                        capture\n                        id='file'\n                        value={values.file}\n                        onChange={handleChange}\n                        onBlur={handleBlur}\n                      />\n                    </div>\n                    {errors.file && touched.file && (\n                      <p className='applyResume__input--textError'>\n                        {errors.file}\n                      </p>\n                    )}\n                    <p className='register__accept'>\n                      با ثبت نام در پروفایل شما با <a href='# '>حریم خصوصی</a> و{' '}\n                      <a href='# '>شرایط و قوانین</a> استفاده از سرویس های سایت\n                      پروفایل موافقت میکنید.\n                    </p>\n                    <Button\n                      htmlType='submit'\n                      className='register__button'\n                      type='primary'\n                      disabled={isSubmitting}>\n                      ادامه\n                    </Button>\n                  </form>\n                );\n              }}\n            </Formik>\n          </Card>\n        </div>\n        <Footer />\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}